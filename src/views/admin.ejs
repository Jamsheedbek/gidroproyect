<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin panel</title>
    <link rel="stylesheet" href="/css/admin.css" />
    <!-- Main Quill library -->
    <script src="//cdn.quilljs.com/1.0.0/quill.js"></script>

    <!-- Theme included stylesheets -->
    <link href="//cdn.quilljs.com/1.0.0/quill.snow.css" rel="stylesheet" />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/5.0.0/mdb.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="admin">
      <div class="d-flex">
        <div
          class="d-flex flex-column flex-shrink-0 p-3 bg-dark"
          style="width: 280px; height: 100vh"
        >
          <a
            href="/"
            class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-white text-decoration-none"
          >
            <svg class="bi pe-none me-2" width="40" height="32">
              <use xlink:href="#bootstrap" />
            </svg>
            <span class="fs-6">Admin panel</span>
          </a>
          <hr />
          <ul class="nav nav-pills flex-column mb-auto">
            <div class="dropdown mb-4">
              <button
                class="btn btn-primary dropdown-toggle w-100 text-start"
                type="button"
                id="dropdownMenuButton"
                data-mdb-toggle="dropdown"
                aria-expanded="false"
              >
                Yangiliklar
              </button>
              <ul
                class="dropdown-menu w-100"
                aria-labelledby="dropdownMenuButton"
              >
                <li>
                  <a class="dropdown-item" href="/direksiya/admin/create/news"
                    >Yangilik yaratish</a
                  >
                </li>
                <li>
                  <a class="dropdown-item" href="/direksiya/admin/get/news"
                    >Barcha yangiliklar</a
                  >
                </li>
              </ul>
            </div>
            <div class="dropdown mb-4">
              <button
                class="btn btn-primary dropdown-toggle w-100 text-start"
                type="button"
                id="dropdownMenuButton"
                data-mdb-toggle="dropdown"
                aria-expanded="false"
              >
                Loyihalar
              </button>
              <ul
                class="dropdown-menu w-100"
                aria-labelledby="dropdownMenuButton"
              >
                <li>
                  <a
                    class="dropdown-item"
                    href="/direksiya/admin/create/project"
                    >Loyiha yaratish</a
                  >
                </li>
                <li>
                  <a class="dropdown-item" href="/direksiya/admin/get/projects"
                    >Barcha loyihalar</a
                  >
                </li>
              </ul>
            </div>
            <a
              class="btn btn-primary w-100 text-start mb-4"
              href="/direksiya/admin/get/users"
            >
              Hodimlar
            </a>
            <a
              class="btn btn-primary w-100 text-start"
              href="/direksiya/admin/get/works"
            >
              Ishlar
            </a>
          </ul>
        </div>
        <div class="wrapper">
          <% if(page == "create-news") { %>
          <form
            id="create-news"
            action="/news"
            method="post"
            enctype="multipart/form-data"
            class="new-form"
          >
            <div class="row">
              <div class="col-3 d-flex align-items-center">
                Yangilik rasmi :
              </div>
              <div class="col-9">
                <input
                  name="file"
                  type="file"
                  id="news-photo"
                  class="new-input"
                />
                <label for="news-photo">
                  <img
                    src="/img/Image 5.png"
                    alt=""
                    class="new-img news-label"
                  />
                </label>
              </div>
            </div>
            <div class="row">
              <div class="col-3 d-flex align-items-center">
                <label for="news-title">Sarlavha :</label>
              </div>
              <div class="col-9">
                <input
                  id="news-title"
                  required
                  class="form-control form-control-lg w-75"
                  type="text"
                  placeholder="Title"
                  name="title"
                  aria-label=".form-control-lg example"
                  style="margin: 15px 0"
                />
                <input
                  type="text"
                  class="d-none"
                  id="news-content"
                  name="content"
                />
              </div>
            </div>
            <div class="row">
              <div class="col-3 d-flex align-items-center">Loyiha turi :</div>
              <div class="col-9">
                <select name="type" class="form-select w-50 mb-3">
                  <option selected value="news">Yangilik</option>
                  <option value="poster">E'lon</option>
                </select>
              </div>
            </div>
            <div class="row">
              <div class="col-3 d-flex align-items-center">Mazmuni:</div>
              <div class="col-9">
                <div class="card w-100 rounded-8">
                  <div id="newstoolbar"></div>
                  <div id="newseditor"></div>
                </div>
              </div>
            </div>
            <div class="d-flex justify-content-end mt-3">
              <button type="submit" class="btn btn-primary">Yaratish</button>
            </div>
          </form>
          <% } %>

          <!-- News -->
          <% if(page == "get-news") { %>
          <table class="table m-2">
            <thead>
              <tr>
                <th scope="col" class="fs-6 table-secondary">Rasm</th>
                <th scope="col" class="fs-6 table-secondary">Title</th>
                <th scope="col" class="fs-6 table-secondary">Delete</th>
              </tr>
            </thead>
            <tbody class="control-wrapper">
              <% news.forEach((e,i) => { %>
              <tr>
                <td>
                  <img src="<%= e.imgUrl %>" alt="" class="new-imgs" />
                </td>
                <td class="text-truncate"><%= e.title %></td>
                <td>
                  <button
                    data-id="<%= e.id %>"
                    data-file="<%= e.fileName %>"
                    type="button"
                    class="btn btn-primary"
                    data-bs-toggle="modal"
                    data-bs-target="#newsBackdrop"
                  >
                    Delete
                  </button>
                </td>
                <div
                  class="modal fade"
                  id="newsBackdrop"
                  data-bs-backdrop="static"
                  data-bs-keyboard="false"
                  tabindex="-1"
                  aria-labelledby="staticBackdropLabel"
                  aria-hidden="true"
                >
                  <form
                    action="/delete-news"
                    method="post"
                    enctype="application/x-www-form-urlencoded"
                  >
                    <div class="modal-dialog">
                      <div class="modal-content">
                        <div class="modal-header"></div>
                        <div class="modal-body">
                          Siz rostan ham o'chirmoqchimisiz?
                          <input
                            class="delete-id d-none"
                            type="text"
                            name="id"
                          />
                          <input
                            class="d-none delete-file"
                            type="text"
                            name="fileName"
                          />
                        </div>
                        <div class="modal-footer">
                          <button
                            type="button"
                            class="btn btn-secondary"
                            data-bs-dismiss="modal"
                          >
                            Close
                          </button>
                          <button type="submit" class="btn btn-primary">
                            Ok
                          </button>
                        </div>
                      </div>
                    </div>
                  </form>
                </div>
              </tr>
              <% }); %>
            </tbody>
          </table>
          <% } %>
          <!-- News end -->

          <!-- Users -->
          <% if(page == "get-users") { %>
          <table class="table" style="margin: 30px 10px">
            <thead>
              <tr>
                <th scope="col" class="fs-6 table-secondary">Username</th>
                <th scope="col" class="fs-6 table-secondary">Lastname</th>
                <th scope="col" class="fs-6 table-secondary">Role</th>
                <th scope="col" class="fs-6 table-secondary">
                  <button
                    data-bs-toggle="modal"
                    data-bs-target="#Create"
                    class="btn btn-primary"
                    style="width: 130px"
                  >
                    Create
                  </button>

                  <!-- Create button modal -->

                  <div
                    class="modal fade"
                    id="Create"
                    data-bs-backdrop="static"
                    data-bs-keyboard="false"
                    tabindex="-1"
                    aria-labelledby="Create"
                    aria-hidden="true"
                  >
                    <div class="modal-dialog">
                      <div class="modal-content">
                        <div class="modal-header">
                          <form
                            action="/create-user"
                            method="post"
                            enctype="application/x-www-form-urlencoded"
                            style="width: 100%"
                          >
                            <div class="new-title w-100">
                              <input
                                required
                                class="form-control form-control-lg w-100"
                                type="text"
                                placeholder="First Name"
                                name="firstName"
                                aria-label=".form-control-lg example"
                                style="margin: 15px 0"
                              />
                              <input
                                required
                                class="form-control form-control-lg w-100"
                                type="text"
                                placeholder="Last Name"
                                name="lastName"
                                aria-label=".form-control-lg example"
                                style="margin: 15px 0"
                              />
                              <input
                                required
                                class="form-control form-control-lg w-100"
                                type="password"
                                name="password"
                                placeholder="Password"
                                aria-label=".form-control-lg example"
                                style="margin: 15px 0"
                              />
                            </div>
                            <div
                              class="d-flex"
                              style="justify-content: flex-end"
                            >
                              <button
                                type="button"
                                class="btn btn-secondary mx-2"
                                data-bs-dismiss="modal"
                              >
                                Cancel
                              </button>
                              <button
                                type="submit"
                                class="btn btn-primary mx-2"
                              >
                                Create
                              </button>
                            </div>
                          </form>
                        </div>
                      </div>
                    </div>
                  </div>
                </th>
              </tr>
            </thead>
            <tbody class="users-wrapper">
              <% users.forEach(user => { %>
              <tr>
                <td><%= user.firstName %></td>
                <td><%= user.lastName %></td>
                <td><%= user.role %></td>
                <td class="col">
                  <button
                    data-id="<%= user.id %>"
                    data-bs-toggle="modal"
                    data-bs-target="#Edit"
                    class="btn btn-primary"
                  >
                    Edit
                  </button>

                  <!-- Edit button modal   -->
                  <div
                    class="modal fade"
                    id="Edit"
                    data-bs-backdrop="static"
                    data-bs-keyboard="false"
                    tabindex="-1"
                    aria-labelledby="Edit"
                    aria-hidden="true"
                  >
                    <div class="modal-dialog">
                      <div class="modal-content">
                        <div class="modal-header">
                          <form
                            action="/edit-user"
                            method="post"
                            enctype="application/x-www-form-urlencoded"
                            style="width: 100%"
                          >
                            <div class="new-title w-100">
                              <input
                                class="form-control form-control-lg w-100"
                                type="text"
                                placeholder="First Name"
                                name="firstName"
                                aria-label=".form-control-lg example"
                                style="margin: 15px 0"
                              />
                              <input
                                class="form-control form-control-lg w-100"
                                type="text"
                                placeholder="Last Name"
                                name="lastName"
                                aria-label=".form-control-lg example"
                                style="margin: 15px 0"
                              />
                              <input
                                class="form-control form-control-lg w-100"
                                type="password"
                                name="password"
                                placeholder="Password"
                                aria-label=".form-control-lg example"
                                style="margin: 15px 0"
                              />
                              <input
                                type="text"
                                name="id"
                                class="d-none user-edit"
                              />
                            </div>
                            <div
                              class="d-flex"
                              style="justify-content: flex-end"
                            >
                              <button
                                type="button"
                                class="btn btn-secondary mx-2"
                                data-bs-dismiss="modal"
                              >
                                Cancel
                              </button>
                              <button
                                type="submit"
                                class="btn btn-primary mx-2"
                              >
                                Ok
                              </button>
                            </div>
                          </form>
                        </div>
                      </div>
                    </div>
                  </div>
                  <button
                    data-id="<%= user.id %>"
                    data-bs-toggle="modal"
                    data-bs-target="#Delete"
                    class="btn btn-primary"
                  >
                    Delete
                  </button>

                  <!-- Delete button modal   -->
                  <div
                    class="modal fade"
                    id="Delete"
                    data-bs-backdrop="static"
                    data-bs-keyboard="false"
                    tabindex="-1"
                    aria-labelledby="Delete"
                    aria-hidden="true"
                  >
                    <div class="modal-dialog">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h1 class="modal-title fs-5" id="staticBackdropLabel">
                            Modal title
                          </h1>
                        </div>
                        <div class="modal-body">
                          Siz rostan ham o'chirmoqchimisiz?
                        </div>
                        <div class="modal-footer">
                          <form
                            action="/delete-user"
                            method="post"
                            enctype="application/x-www-form-urlencoded"
                          >
                            <input
                              type="text"
                              name="id"
                              class="d-none delete-user"
                            />
                            <button
                              type="button"
                              class="btn btn-secondary"
                              data-bs-dismiss="modal"
                            >
                              Close
                            </button>
                            <button type="submit" class="btn btn-primary">
                              Ok
                            </button>
                          </form>
                        </div>
                      </div>
                    </div>
                  </div>
                </td>
              </tr>
              <% }); %>
            </tbody>
          </table>
          <% } %>
          <!-- Users end -->

          <!-- Project -->
          <% if(page == "create-project") { %>
          <form
            id="create-projects"
            action="/projects"
            class="project-form"
            method="post"
            enctype="multipart/form-data"
          >
            <div class="row">
              <div class="col-3 d-flex align-items-center">Loyiha rasmi :</div>
              <div class="col-9">
                <input
                  required
                  name="file"
                  type="file"
                  id="add-photo"
                  class="d-none add-photo"
                />
                <label for="add-photo">
                  <img
                    src="/img/Image 5.png"
                    alt=""
                    class="new-img project-label"
                  />
                </label>
              </div>
            </div>
            <div class="row">
              <div class="col-3 d-flex align-items-center">Loyiha nomi :</div>
              <div class="col-9">
                <input
                  required
                  class="form-control form-control-lg w-50"
                  type="text"
                  placeholder="Name"
                  name="name"
                  aria-label=".form-control-lg example"
                  style="margin: 15px 0"
                />
              </div>
            </div>
            <div class="row">
              <div class="col-3 d-flex align-items-center">Loyiha turi :</div>
              <div class="col-9">
                <select name="type" class="form-select w-50 mb-3">
                  <option selected value="finished">Joriy</option>
                  <option value="planned">Istiqbolli</option>
                </select>
              </div>
            </div>
            <div class="row">
              <div class="col-3 d-flex align-items-center">
                Loyiha mazmuni :
              </div>
              <div class="col-9">
                <input
                  type="text"
                  class="d-none"
                  name="content"
                  id="project-content"
                />
                <div class="card w-100 rounded-8">
                  <div id="projecttoolbar"></div>
                  <div id="projecteditor"></div>
                </div>
              </div>
            </div>
            <div class="d-flex justify-content-end mt-3">
              <button type="submit" class="btn btn-primary">Yaratish</button>
            </div>
          </form>
          <% } %>
          <!-- Project end -->

          <!-- Works start -->
          <% if(page == "get-works") { %>
          <table class="table m-2">
            <thead>
              <tr>
                <th scope="col" class="fs-6 table-secondary">Title</th>
                <th scope="col" class="fs-6 table-secondary">Username</th>
                <th scope="col" class="fs-6 table-secondary">Lastname</th>
                <th scope="col" class="fs-6 table-secondary">Download</th>
                <th scope="col" class="fs-6 table-secondary">Delete</th>
              </tr>
            </thead>
            <tbody class="works-wrapper">
              <% works.forEach(work => { %>
              <tr>
                <td><%= work.title %></td>
                <td><%= work.user.firstName %></td>
                <td><%= work.user.lastName %></td>
                <td>
                  <form action="<%= work.url %>" method="get">
                    <button type="submit" class="btn btn-primary">
                      Download
                    </button>
                  </form>
                </td>
                <td>
                  <button
                    data-id="<%= work.id %>"
                    type="button"
                    class="btn btn-primary"
                    data-bs-toggle="modal"
                    data-bs-target="#workBackdrop"
                  >
                    Delete
                  </button>
                </td>
                <div
                  class="modal fade"
                  id="workBackdrop"
                  data-bs-backdrop="static"
                  data-bs-keyboard="false"
                  tabindex="-1"
                  aria-labelledby="staticBackdropLabel"
                  aria-hidden="true"
                >
                  <form
                    action="/delete-work"
                    method="post"
                    enctype="application/x-www-form-urlencoded"
                  >
                    <input class="d-none work-id" type="text" name="id" />
                    <div class="modal-dialog">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h1 class="modal-title fs-5" id="staticBackdropLabel">
                            Modal
                          </h1>
                        </div>
                        <div class="modal-body">
                          Siz rostan ham o'chirmoqchimisiz?
                        </div>
                        <div class="modal-footer">
                          <button
                            type="button"
                            class="btn btn-secondary"
                            data-bs-dismiss="modal"
                          >
                            Close
                          </button>
                          <button type="submit" class="btn btn-primary">
                            Ok
                          </button>
                        </div>
                      </div>
                    </div>
                  </form>
                </div>
              </tr>
              <% }); %>
            </tbody>
          </table>
          <% } %>
          <!-- Works end -->

          <!-- Project Images -->
          <% if(page == "get-projects") { %>
          <table class="table m-2">
            <thead>
              <tr>
                <th scope="col" class="fs-6 table-secondary">Image</th>
                <th scope="col" class="fs-6 table-secondary">Name</th>
                <th scope="col" class="fs-6 table-secondary">Delete</th>
              </tr>
            </thead>
            <tbody class="projects-wrapper">
              <% projects.forEach(project => { %>
              <tr>
                <td>
                  <img src="<%= project.imgUrl %>" alt="" class="new-imgs" />
                </td>
                <td><%= project.name %></td>
                <td>
                  <button
                    type="button"
                    class="btn btn-primary"
                    data-bs-toggle="modal"
                    data-bs-target="#staticBackdrop"
                    data-id="<%= project.id %>"
                  >
                    Delete
                  </button>
                </td>
                <div
                  class="modal fade"
                  id="staticBackdrop"
                  data-bs-backdrop="static"
                  data-bs-keyboard="false"
                  tabindex="-1"
                  aria-labelledby="staticBackdropLabel"
                  aria-hidden="true"
                >
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h1 class="modal-title fs-5" id="staticBackdropLabel">
                          Modal title
                        </h1>
                      </div>
                      <div class="modal-body">
                        Siz rostan ham o'chirmoqchimisiz?
                      </div>
                      <div class="modal-footer">
                        <form
                          action="/delete-project"
                          method="post"
                          enctype="application/x-www-form-urlencoded"
                        >
                          <input
                            type="text"
                            name="id"
                            class="d-none project-id"
                          />
                          <button
                            type="button"
                            class="btn btn-secondary"
                            data-bs-dismiss="modal"
                          >
                            Close
                          </button>
                          <button type="submit" class="btn btn-primary">
                            Ok
                          </button>
                        </form>
                      </div>
                    </div>
                  </div>
                </div>
              </tr>
              <% }); %>
            </tbody>
          </table>
          <% } %>
          <!-- Project Images end -->
        </div>
      </div>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
      crossorigin="anonymous"
    ></script>

    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/5.0.0/mdb.min.js"
    ></script>
    <script></script>
    <script src="/js/admin.js"></script>
  </body>
</html>
